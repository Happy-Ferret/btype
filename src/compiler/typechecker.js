// TODO: Check that all function code paths return the correct type
